(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);a(43);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=a(21),s=a(18),u=a(2),i=a(7),m=a(6),d=a(5),p=a.n(d),f=a(9),E=a(10),v=a.n(E),b={login:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t,{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){window.localStorage.removeItem("logintoken")},storeToken:function(e){window.localStorage.setItem("logintoken",e)},getToken:function(){return window.localStorage.getItem("logintoken")}};var g=function(e){var t=e.setLoginToken,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(""),i=Object(u.a)(s,2),m=i[0],d=i[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b.login({username:l,password:m}).then((function(e){b.storeToken(e.token),t(e.token)})).catch((function(e){console.log(e.response.data.error)}))},className:"card card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",autoFocus:!0,type:"text",name:"username",onChange:function(e){o(e.target.value)},placeholder:"Username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",name:"password",onChange:function(e){d(e.target.value)},placeholder:"Password",required:!0})),r.a.createElement("button",{className:"btn btn-primary"},"Login")))},h={registerAccount:function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("/api/register","/"),{username:t,email:a,password:n},{headers:{"Content-type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()};var N=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],i=o[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(u.a)(v,2),g=b[0],N=b[1];return g?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h.registerAccount(a,s,f).then((function(e){N(!0)})).catch((function(e){console.log(e.response.data.error)}))},className:"card card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",autoFocus:!0,type:"text",name:"username",onChange:function(e){c(e.target.value)},placeholder:"Username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"email",name:"email",onChange:function(e){i(e.target.value)},placeholder:"Email Address"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",name:"password",onChange:function(e){E(e.target.value)},placeholder:"Password",required:!0})),r.a.createElement("button",{className:"btn btn-primary"},"Register")))},y=function(e,t){return"".concat("/search","?q=").concat(e,"&near=").concat(t)};a(72);var O=function(e){var t=e.lastQuery,a=e.lastLocation,c=Object(n.useState)(t||""),l=Object(u.a)(c,2),o=l[0],s=l[1],i=Object(n.useState)(a||""),d=Object(u.a)(i,2),p=d[0],f=d[1],E=Object(m.g)(),v=Object(m.h)();return Object(n.useEffect)((function(){a&&f(a)}),[a]),r.a.createElement("div",{className:"/"===v.pathname?"search-page":""},r.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center ".concat("/"===v.pathname&&"search-panel")},"/"===v.pathname&&r.a.createElement("h2",{className:"search-panel-title"},"Find your next meal here"),r.a.createElement("form",{className:"form-inline justify-content-center p-2"},r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"search",value:o,placeholder:"Restaurant or Cuisine",onChange:function(e){s(e.target.value)},className:"form-control mx-2 input-box",size:50,required:!0}),r.a.createElement("input",{type:"text",name:"location",value:p,placeholder:"Location",onChange:function(e){f(e.target.value)},className:"form-control mx-2 input-box",size:30}),r.a.createElement("button",{className:"btn btn-primary px-5 input-box",onClick:function(e){e.preventDefault(),""!==o&&(""===p?navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){E.push(y(o,"".concat(e.coords.latitude,",").concat(e.coords.longitude)))}),(function(){console.log("An error occured. Cannot find your location.")})):console.log("Navigator unavailable. Cannot find your location."):E.push(y(o,"".concat(p))))}},"Go")))))};var j=a(42);function k(e){for(var t=e.rating,a=e.className,n=Math.floor(t),c=t-n,l=[],o=0;o<n;o++)l.push(r.a.createElement("i",{key:o+"star",className:"fas fa-star"}));return c>=.75?l.push(r.a.createElement("i",{key:"laststar",className:"fas fa-star"})):c>=.25&&l.push(r.a.createElement("i",{key:"laststar",className:"fas fa-star-half"})),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:a},t)," ",r.a.createElement("small",{className:"text-warning"},l))}function x(e){var t=e.priceLevel,a=e.className;return r.a.createElement("span",{className:a},"$".repeat(t))}function w(e){var t=e.openingTime,a=e.className,n=t[(new Date).getDay()];return r.a.createElement("span",{className:a},n)}var C=function(e){var t=e.restaurant;return e.verbose?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Info"),r.a.createElement("h6",null,t.name),r.a.createElement("div",{className:"embedmap p-1",style:{height:"200px",backgroundColor:"green"}}),r.a.createElement("div",{className:"font-weight-bold mt-3"},"Location"),r.a.createElement("div",null,t.address),r.a.createElement("div",{className:"font-weight-bold mt-3"},"Hours of Operation"),r.a.createElement("div",null,r.a.createElement(w,{openingTime:t.opening_time})),r.a.createElement("div",{className:"font-weight-bold mt-3"},"Cuisine"),r.a.createElement("div",null,t.keywords.join(", ")),r.a.createElement("div",{className:"font-weight-bold mt-3"},"Payment Options"),r.a.createElement("div",null,t.payment.join(", "))):r.a.createElement("div",{className:"p-3"},r.a.createElement("h6",null,t.name),r.a.createElement(k,{rating:t.rating,className:"small text-muted"}),r.a.createElement("small",{className:"text-muted"},"(",t.user_ratings_total,")")," \xb7 ",r.a.createElement(x,{priceLevel:t.price_level,className:"small text-muted"}),r.a.createElement("br",null),r.a.createElement("small",{className:"text-muted"},t.keywords.join(" \xb7 ")),r.a.createElement("br",null),r.a.createElement("small",{className:"text-muted"},t.address),r.a.createElement("br",null),r.a.createElement(w,{openingTime:t.opening_time,className:"small text-muted"}),r.a.createElement("br",null))},S="/api/restaurant",L={getAllRestaurants:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(S,{headers:{"Content-type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getRestaurant:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(S,"/").concat(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchRestaurantByKeywords:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(S,"/location/").concat(t,"/query/").concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),placeOrderAtRestaurant:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(S,"/").concat(t),a,{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),routeToRestaurant:function(e){return"".concat("/place","/").concat(e)}};a(74);var T=function(e){var t=e.keyword,a=e.location,c=e.locationQuery,l=e.address,o=e.setLocation,s=Object(n.useState)(""),d=Object(u.a)(s,2),p=d[0],f=d[1],E=Object(n.useState)({}),v=Object(u.a)(E,2),b=v[0],g=v[1],h=Object(n.useState)(),N=Object(u.a)(h,2),y=N[0],O=N[1],k=Object(n.useState)([]),x=Object(u.a)(k,2),w=x[0],S=x[1],T=Object(m.g)(),F=document.getElementById("map");return Object(n.useEffect)((function(){if(F){var e=new google.maps.Map(F,{center:a,zoom:13});google.maps.event.addListener(e,"center_changed",(function(){var t=e.getCenter().toJSON();o(t)})),w.map((function(t){var a=new google.maps.Marker({position:t.location,map:e,title:t.name}),n=new google.maps.InfoWindow({content:""});a.addListener("mouseover",(function(){var c=Object(j.renderToString)(r.a.createElement(C,{restaurant:t,verbose:!1}));n.setContent(c),n.open(e,a)})),a.addListener("mouseout",(function(){n.close()})),a.addListener("click",(function(){T.push("".concat(L.routeToRestaurant(t.id)))}))})),O(e)}}),[F,w]),Object(n.useEffect)((function(){y&&l&&function(e,t,a){var n=e.getCenter(),r=n?new google.maps.LatLngBounds({lat:n.lat()-1,lng:n.lng()-1},{lat:n.lat()+1,lng:n.lng()+1}):void 0;(new google.maps.Geocoder).geocode({address:t,bounds:r},(function(e,t){"OK"===t&&a(e[0].geometry.location.toJSON())}))}(y,l,o)}),[y,c,l]),Object(n.useEffect)((function(){if(a){if(t===p&&a===b)return;L.searchRestaurantByKeywords("".concat(a.lat,",").concat(a.lng),t).then((function(e){S(e),f(t),g(a)})).catch((function(e){console.log(e.response.data.error)}))}}),[c,l,t]),r.a.createElement("div",{className:"map-panel"},r.a.createElement("div",{id:"searchResult"},r.a.createElement("ul",{className:"list-group"},w.map((function(e){return r.a.createElement("li",{key:e.id,className:"list-group-item info-card p-0"},r.a.createElement(i.b,{to:L.routeToRestaurant(e.id)},r.a.createElement(C,{restaurant:e,verbose:!1})))})))),r.a.createElement("div",{id:"map"}))};var F=function(){var e=new URLSearchParams(Object(m.h)().search),t=e.get("q")||"",a=e.get("near"),c=Object(n.useState)(),l=Object(u.a)(c,2),o=l[0],s=l[1],i=Object(n.useState)(),d=Object(u.a)(i,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(u.a)(E,2),b=v[0],g=v[1];return Object(n.useEffect)((function(){a?a.match(/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/)?(s({lat:parseFloat(a.split(",")[0]),lng:parseFloat(a.split(",")[1])}),f(a),g("")):(g(a),s(void 0),f(void 0)):s(void 0)}),[a]),r.a.createElement("div",null,r.a.createElement(O,{lastQuery:t,lastLocation:o?"".concat(o.lat.toFixed(4),",").concat(o.lng.toFixed(4)):b}),r.a.createElement(T,{keyword:t,location:o||void 0,locationQuery:p||"",address:o?"":b,setLocation:s}))},A=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"MODAL_SHOW":return{name:null===(e=r.data)||void 0===e?void 0:e.name,description:null===(t=r.data)||void 0===t?void 0:t.description,price:null===(a=r.data)||void 0===a?void 0:a.price};case"MODAL_HIDE":return null;default:return n}},R=function(e){return{type:"ORDER_FOOD",data:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_FOOD":return 0===e.filter((function(e){var a;return e.name===(null===(a=t.data)||void 0===a?void 0:a.name)})).length?e.concat(t.data):0===(null===(a=t.data)||void 0===a?void 0:a.quantity)?e.filter((function(e){var a;return e.name!==(null===(a=t.data)||void 0===a?void 0:a.name)})):e.map((function(e){var a;return e.name===(null===(a=t.data)||void 0===a?void 0:a.name)?t.data:e}));var a;case"ORDER_CLEAR":return[];default:return e}},I=a(14),M=a(19);a(75);function _(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.modal})),a=null!==t,c=Object(n.useState)(1),l=Object(u.a)(c,2),o=l[0],i=l[1],m=t?t.price*o:0,d=function(){e({type:"MODAL_HIDE",data:null}),i(1)};return r.a.createElement(I.a,{show:a,onHide:d,animation:!1},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,null,"Add to Order")),r.a.createElement(I.a.Body,null,t&&r.a.createElement("div",{className:"m-2"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement("p",{className:"card-text"},t.description))),r.a.createElement(I.a.Footer,{className:"justify-content-between"},r.a.createElement(M.a,{variant:"secondary",onClick:d},"Cancel"),t&&r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("span",null,"Quantity: "),r.a.createElement("input",{type:"number",defaultValue:1,min:"1",max:"99",onChange:function(e){i(parseInt(e.target.value))},className:"form-control number mx-1"}),r.a.createElement(M.a,{variant:"outline-primary",onClick:function(){t&&e(R({name:t.name,price:t.price,quantity:o})),e({type:"MODAL_HIDE",data:null}),i(1)},className:"add-button"},"$",m.toFixed(2)," Add to Order"))))}function q(e){var t=e.item,a=Object(s.b)();return r.a.createElement("div",{className:"card menu-item m-2",onClick:function(){a(function(e){return{type:"MODAL_SHOW",data:e}}({name:t.name,description:t.description,price:t.price}))}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement("p",{className:"card-text"},t.description),r.a.createElement("div",null,"$",t.price)))}var P=function(e){var t=e.menu;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e.name,className:"my-4"},r.a.createElement("h4",null,e.name),r.a.createElement("div",{className:"d-flex flex-wrap"},e.items.map((function(t){return r.a.createElement(q,{key:"".concat(e.name,"-").concat(t.name),item:t})}))))})),r.a.createElement(_,null))},B="/api/order",z={getAllOrders:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(B,"/"),{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOrder:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(B,"/").concat(t),{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),routeToConfirmation:function(e){return"".concat("/order","/").concat(e)},totalPrice:function(e){return e.items.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)}};a(77);var $=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(m.i)().placeID,o=Object(s.c)((function(e){return e.order})),i=Object(s.b)(),d=Object(m.g)();Object(n.useEffect)((function(){L.getRestaurant(l).then((function(e){c(e)})).catch((function(e){console.log(e.response.data.error)}))}),[l]);var p=function(){a&&a.id&&L.placeOrderAtRestaurant(a.id,o).then((function(e){i({type:"ORDER_CLEAR"}),d.push(z.routeToConfirmation(e.id))})).catch((function(e){console.log(e.response.data.error)}))},f=function(e){return function(t){e&&i(R({name:e.name,price:e.price,quantity:parseInt(t.target.value)}))}};return r.a.createElement("div",{className:"place-view"},r.a.createElement("div",null),a&&r.a.createElement("div",{className:"place-info p-3"},r.a.createElement("h1",{className:"font-weight-bold"},a.name),r.a.createElement("div",{className:"font-weight-bold"},a.rating&&r.a.createElement(k,{rating:a.rating})," ",r.a.createElement("span",null,a.user_ratings_total," reviews")," \xb7 ",a.price_level&&r.a.createElement(x,{priceLevel:a.price_level})," \xb7 ",r.a.createElement("span",null,a.keywords.join(" \xb7 "))),r.a.createElement("hr",null),r.a.createElement(P,{menu:a.menus})),a&&r.a.createElement("div",{className:"booking-info p-3"},r.a.createElement("div",{className:"card card-body shadow-sm rounded"},r.a.createElement("h5",null,"Order"),r.a.createElement("div",null,o.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("div",{className:"my-1"},r.a.createElement("input",{type:"number",onChange:f(e),defaultValue:e.quantity,min:0,max:99,className:"form-control number"}),e.name))})),r.a.createElement("hr",null),r.a.createElement("div",{className:"float-right"},"Total: $",function(e){return e.reduce((function(e,t){return e+function(e){return e.price*e.quantity}(t)}),0)}(o).toFixed(2))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-center"},a.takeaway&&r.a.createElement("button",{type:"button",onClick:p,disabled:0===o.length,className:"btn btn-danger px-4 mx-1"},"Takeout"),a.delivery&&r.a.createElement("button",{type:"button",onClick:p,disabled:0===o.length,className:"btn btn-danger px-4 mx-1"},"Delivery"))),r.a.createElement("div",{className:"card card-body shadow-sm mt-3"},r.a.createElement(C,{restaurant:a,verbose:!0}))))};a(78);var H=function(e){var t=e.order,a=e.title,n=e.footer;return r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",null,a),r.a.createElement("small",{className:"text-muted"},"Ordered at ",new Date(t.createTime).toLocaleString()),r.a.createElement("hr",null),r.a.createElement("h5",{className:"card-title"},t.restaurant.name),t.items.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("span",null,e.name)," x ",r.a.createElement("span",null,e.quantity)," : ",r.a.createElement("span",null,"$",e.price*e.quantity))})),r.a.createElement("hr",null),r.a.createElement("span",null,n))};var Q=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),s=o[0],d=o[1],p=Object(m.i)().orderID;return Object(n.useEffect)((function(){p?z.getOrder(p).then((function(e){c(e.data)})).catch((function(e){console.log(e.response.data.error)})):z.getAllOrders().then((function(e){d(e.data),c(void 0)})).catch((function(e){console.log(e.response.data.error)}))}),[p]),r.a.createElement("div",{className:"order-view"},a?r.a.createElement("div",{className:"order-panel"},r.a.createElement("div",{className:"card"},r.a.createElement(H,{order:a,title:"Your order is ".concat(a.complete?"completed":"confirmed","!"),footer:"Total: $".concat(z.totalPrice(a))}))):r.a.createElement("div",{className:"order-view"},r.a.createElement("div",{className:"order-panel"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",null,"Order history"),s.map((function(e){return r.a.createElement(i.b,{key:e.id,to:z.routeToConfirmation(e.id)},r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-title"},e.restaurant.name,e.complete?r.a.createElement("span",{className:"badge badge-primary float-right"},"Complete"):r.a.createElement("span",{className:"badge badge-secondary float-right"},"Imcomplete")),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("small",{className:"small text-muted"},new Date(e.createTime).toDateString()),r.a.createElement("small",{className:"small"},"Total: $",z.totalPrice(e))))))}))))))},J="/api/manage",W={addRestaurant:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(J,"/restaurants"),t,{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),manageRestaurant:function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t?"".concat(J,"/restaurants/").concat(t):J,e.next=3,v.a.get(a,{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),restaurantOrders:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(J,"/restaurants/").concat(t,"/orders"),{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateOrderStatus:function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat(J,"/restaurants/").concat(t,"/orders/").concat(a),{status:n},{headers:{Authorization:"bearer ".concat(b.getToken()),"Content-type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),routeToRestaurant:function(e){return"".concat("/manage","/").concat(e)}};a(79);function K(e){var t=e.order,a=e.setOrder,c=e.updateOrder,l=Object(n.useState)(!1),o=Object(u.a)(l,2),s=o[0],i=o[1],m=function(){a(void 0)};return Object(n.useEffect)((function(){i(!!t)}),[t]),r.a.createElement(I.a,{show:s,onHide:m,animation:!1},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,null,"Order ",null===t||void 0===t?void 0:t.id)),r.a.createElement(I.a.Body,null,r.a.createElement("div",null,"Order is complete?")),r.a.createElement(I.a.Footer,{className:"justify-content-between"},r.a.createElement(M.a,{variant:"secondary",onClick:m},"Cancel"),r.a.createElement(M.a,{variant:"outline-primary",onClick:function(){(null===t||void 0===t?void 0:t.restaurant.id)&&(null===t||void 0===t?void 0:t.id)&&W.updateOrderStatus(t.restaurant.id,t.id,"complete").then((function(e){c(e)})).catch((function(e){console.log(e.response.data.error)})),m()},className:"add-button"},"Complete")))}var U=function(e){var t=e.restaurants,a=Object(n.useState)([]),c=Object(u.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(),m=Object(u.a)(s,2),d=m[0],p=m[1],f=function(e){p(e)};return Object(n.useEffect)((function(){1==t.length&&t[0].id&&W.restaurantOrders(t[0].id).then((function(e){o(e)})).catch((function(e){console.log(e.response.data.error)}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:1===t.length?"manage-panel manage-panel-4":"manage-panel manage-panel-3"},r.a.createElement("div",null),1!==t.length?r.a.createElement("div",{className:"d-flex flex-wrap"},t.map((function(e){return r.a.createElement(i.b,{to:W.routeToRestaurant(e.id),key:e.id,className:"manage-restaurant-link"},r.a.createElement("div",{className:"card manage-restaurant-card m-2"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("div",{className:"card-text"},e.address))))}))):r.a.createElement("div",null,r.a.createElement("h5",null,"Imcomplete Orders:"),r.a.createElement("div",{className:"mt-2"},l.filter((function(e){return!e.complete})).map((function(e){return r.a.createElement("div",{key:e.id,className:"card manage-order-card m-2",onClick:function(){return f(e)}},r.a.createElement(H,{order:e,title:"Order ".concat(e.id),footer:"$".concat(z.totalPrice(e))}))}))),r.a.createElement("hr",null),r.a.createElement("h5",null,"Past Orders:"),r.a.createElement("div",{className:"mt-2"},l.filter((function(e){return e.complete})).map((function(e){return r.a.createElement("div",{key:e.id,className:"card manage-order-card m-2",onClick:function(){return f(e)}},r.a.createElement(H,{order:e,title:"Order ".concat(e.id),footer:"$".concat(z.totalPrice(e))}))})))),1===t.length?r.a.createElement("div",{className:"card card-body shadow-sm mt-3"},r.a.createElement(C,{restaurant:t[0],verbose:!0})):r.a.createElement("div",null)),r.a.createElement(K,{order:d,setOrder:p,updateOrder:function(e){o(l.map((function(t){return t.id===e.id?e:t})))}}))},V=a(26);a(80);var G=function(e){var t=e.list,a=e.setList,c=e.options,l=e.limit,o=e.message,s=Object(n.useState)(c.filter((function(e){return!t.includes(e)}))[0]),i=Object(u.a)(s,2),m=i[0],d=i[1];return Object(n.useEffect)((function(){d(c.filter((function(e){return!t.includes(e)}))[0])}),[t]),r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"opt"},r.a.createElement("h5",null,o,":")),r.a.createElement("div",{className:"mb-1"},t.map((function(e){return r.a.createElement("span",{className:"badge selected-badge mx-1",key:e},e,r.a.createElement("sup",{className:"selected-x",onClick:function(){return function(e){a(t.filter((function(t){return t!=e})))}(e)}},"x"))}))),r.a.createElement("div",{className:"form-inline"},r.a.createElement("select",{className:"form-control",id:"opt",value:m,onChange:function(e){return d(e.target.value)}},c.filter((function(e){return!t.includes(e)})).map((function(e){return r.a.createElement("option",{key:e},e)})),r.a.createElement("option",null,"Other")),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-1",onClick:function(){a(t.concat(m))},disabled:t.length>=l},"Add"))))},X=a(23);a(81);function Y(e){var t=e.menu,a=e.menus,c=e.setMenus,l=Object(n.useState)(""),o=Object(u.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(0),v=Object(u.a)(E,2),b=v[0],g=v[1];return r.a.createElement("div",{key:t.name},r.a.createElement("h5",null,t.name),r.a.createElement("div",{className:"d-flex flex-wrap"},t.items.map((function(e){return r.a.createElement("div",{className:"card menu-card",key:e.name},r.a.createElement("div",null,r.a.createElement("button",{className:"float-right btn btn-light delete-button",onClick:function(){return function(e){c(a.map((function(a){return a.name===t.name?Object(X.a)(Object(X.a)({},t),{},{items:t.items.filter((function(t){return t.name!==e.name}))}):a})))}(e)}},"x"),r.a.createElement("div",null,r.a.createElement("span",null,e.name)),r.a.createElement("div",null,r.a.createElement("span",null,e.description)),r.a.createElement("div",null,r.a.createElement("span",null,"$",e.price))))}))),r.a.createElement("div",{className:"card menu-card"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Item name",maxLength:40,value:s,onChange:function(e){return i(e.target.value)}}),r.a.createElement("textarea",{className:"form-control",placeholder:"Description",rows:3,value:p,onChange:function(e){return f(e.target.value)}}),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"$")),r.a.createElement("input",{type:"number",id:"price",className:"form-control",placeholder:"Unit price",value:b,onChange:function(e){return g(parseFloat(e.target.value))},min:0,step:.01})),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",disabled:!(b>=0&&s.length>0),onClick:function(){c(a.map((function(e){return e.name===t.name?Object(X.a)(Object(X.a)({},t),{},{items:t.items.concat({name:s,description:p,price:b})}):e}))),i(""),f(""),g(0)}},"Add Item")))}var Z=function(e){var t=e.menus,a=e.setMenus,c=Object(n.useState)(""),l=Object(u.a)(c,2),o=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("div",null,r.a.createElement("h5",null,"Menus:")),t.map((function(e){return r.a.createElement("div",{className:"border rounded p-2 mx-1 my-2",key:e.name},r.a.createElement("button",{className:"float-right btn btn-light delete-button",onClick:function(){return function(e){a(t.filter((function(t){return t.name!==e.name})))}(e)}},"x"),r.a.createElement(Y,{menu:e,menus:t,setMenus:a}))})),r.a.createElement("div",{className:"form-inline"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Menu name",value:o,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary ml-1",disabled:""===o,onClick:function(){""!==o&&(a(t.concat({name:o,items:[]})),s(""))}},"Add Menu"))))};var ee=function(e){var t=e.handleAddRestaurant,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(""),i=Object(u.a)(s,2),m=i[0],d=i[1],p=Object(n.useState)(["09:00-21:00","09:00-21:00","09:00-21:00","09:00-21:00","09:00-21:00","09:00-21:00","09:00-21:00"]),f=Object(u.a)(p,2),E=f[0],v=f[1],b=Object(n.useState)([]),g=Object(u.a)(b,2),h=g[0],N=g[1],y=Object(n.useState)([]),O=Object(u.a)(y,2),j=O[0],k=O[1],x=Object(n.useState)(!1),w=Object(u.a)(x,2),C=w[0],S=w[1],L=Object(n.useState)(!1),T=Object(u.a)(L,2),F=T[0],A=T[1],R=Object(n.useState)([]),D=Object(u.a)(R,2),I=D[0],M=D[1],_=Object(n.useState)({lat:"0",lng:"0"}),q=Object(u.a)(_,2),P=q[0],B=q[1],z=function(e){var t=e.split("-"),a=Object(u.a)(t,2),n=a[0],r=a[1];return[].concat(Object(V.a)(n.split(":")),Object(V.a)(r.split(":")))},$=function(e,t,a){var n=Object(V.a)(E),r=z(n[e]);r[a]="0".concat(t).slice(-2),n[e]="".concat(r[0],":").concat(r[1],"-").concat(r[2],":").concat(r[3]),v(n)};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),W.addRestaurant({name:l,address:m,opening_time:E,keywords:h,payment:j,delivery:C,takeaway:F,menus:I,location:{lat:parseFloat(P.lat),lng:parseFloat(P.lng)}}).then((function(e){t(e)})).catch((function(e){console.log(e.response.data.error)}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"restaurantName"},r.a.createElement("h5",null,"Restaurant Name:")),r.a.createElement("input",{type:"text",className:"form-control",id:"restaurantName",placeholder:"Restaurant Name",onChange:function(e){return o(e.target.value)}})),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"restaurantAddress"},r.a.createElement("h5",null,"Restaurant Address:")),r.a.createElement("input",{type:"text",className:"form-control",id:"restaurantAddress",placeholder:"Address",onChange:function(e){return d(e.target.value)}})),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"restaurantAddress"},r.a.createElement("h5",null,"Restaurant Location:")),r.a.createElement("div",{className:"form-inline",id:"restaurantAddress"},r.a.createElement("label",{htmlFor:"restaurantLatitude"},"Latitude:"),r.a.createElement("input",{type:"number",className:"form-control",id:"restaurantLatitude",placeholder:"Latitude",value:P.lat,onChange:function(e){return B({lat:e.target.value,lng:P.lng})}}),r.a.createElement("label",{htmlFor:"restaurantLongitude"},"Longitude:"),r.a.createElement("input",{type:"number",className:"form-control",id:"restaurantLongitude",placeholder:"Longitude",value:P.lng,onChange:function(e){return B({lat:P.lat,lng:e.target.value})}}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"openTime"},r.a.createElement("h5",null,"Opening Time:")),r.a.createElement("div",{id:"openTime"},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e,t){return r.a.createElement("div",{key:e},r.a.createElement("div",{className:"form-row"},r.a.createElement("label",{htmlFor:"".concat(e,"-ch"),className:"col-1"},e,":"),r.a.createElement("input",{type:"number",className:"form-control col-1",id:"".concat(e,"-ch"),min:0,max:23,step:1,value:z(E[t])[0],onChange:function(e){return $(t,e.target.value,0)}}),r.a.createElement("label",{htmlFor:"".concat(e,"-om"),className:"mx-1"},":"),r.a.createElement("input",{type:"number",className:"form-control col-1",id:"".concat(e,"-om"),min:0,max:59,step:1,value:z(E[t])[1],onChange:function(e){return $(t,e.target.value,1)}}),r.a.createElement("label",{htmlFor:"".concat(e,"-ch"),className:"mx-1"},"to"),r.a.createElement("input",{type:"number",className:"form-control col-1",id:"".concat(e,"-ch"),min:0,max:23,step:1,value:z(E[t])[2],onChange:function(e){return $(t,e.target.value,2)}}),r.a.createElement("label",{htmlFor:"".concat(e,"-cm"),className:"mx-1"},":"),r.a.createElement("input",{type:"number",className:"form-control col-1",id:"".concat(e,"-cm"),min:0,max:59,step:1,value:z(E[t])[3],onChange:function(e){return $(t,e.target.value,3)}})))})))),r.a.createElement("hr",null),r.a.createElement(G,{list:h,setList:N,options:["Canadian","Korean","Chinese","Indian","Italian","French","Turkish","American","Mexican","Japanese","Thai","Vietnam","Mongolian","Spanish","European","Asian","Mediterranean","African","Fusion","Continental","Breakfast","Lunch","Brunch","Fast food","Fine dining","Farm-to-table","Comfort food","Pub","Bar","Pizza","Pho","BBQ","Wings","Steakhouse","Sushi","Teppanyaki","Seafood"],limit:5,message:"Select up to 5 keywords:"}),r.a.createElement("hr",null),r.a.createElement(G,{list:j,setList:k,options:["Visa","MasterCard","AMEX","Discover"],limit:4,message:"Select up to 4 payment methods:"}),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-check-label"},r.a.createElement("h5",null,"Delivery methods:")),r.a.createElement("div",null,r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"delivery",onChange:function(e){return S(e.target.checked)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"delivery"},"Delivery")),r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"takeaway",onChange:function(e){return A(e.target.checked)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"takeaway"},"Takeaway"))),r.a.createElement("hr",null),r.a.createElement(Z,{menus:I,setMenus:M}),r.a.createElement("hr",null),r.a.createElement("button",{type:"submit",className:"btn btn-primary my-1"},"Submit"))};a(82);var te=function(){var e=Object(n.useState)({username:"",name:"",restaurants:[]}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),s=o[0],i=o[1],d=Object(m.i)().placeID;return Object(n.useEffect)((function(){d?W.manageRestaurant(d).then((function(e){c(e)})).catch((function(e){console.log(e.response.data.error)})):W.manageRestaurant().then((function(e){c(e)})).catch((function(e){console.log(e.response.data.error)}))}),[d]),r.a.createElement("div",{className:"business-view p-3"},r.a.createElement("h1",{className:"font-weight-bold"},"My Restaurants"),s?r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return i(!1)}},"Cancel"):r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return i(!0)}},"Add a restaurant"),r.a.createElement("hr",null),s?r.a.createElement(ee,{handleAddRestaurant:function(e){c(e),i(!1)}}):r.a.createElement(U,{restaurants:a.restaurants}))};var ae=function(e){var t=e.setLoginToken;return Object(n.useEffect)((function(){t(null),b.logout()}),[]),r.a.createElement(m.a,{to:"/"})};a(83);var ne=function(){var e=Object(n.useState)(b.getToken()),t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement("header",{className:"app-header d-flex justify-content-between"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/",className:"mx-1"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/order",className:"mx-1"},"My Orders"))),a?r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/manage",className:"mx-1"},"My Restaurants")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/logout",className:"mx-1"},"Logout"))):r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/login",className:"mx-1"},"login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:"/register",className:"mx-1"},"register")))),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(O,null)),r.a.createElement(m.b,{path:"/search"},r.a.createElement(F,null)),r.a.createElement(m.b,{path:"/order/:orderID?"},r.a.createElement(Q,null)),r.a.createElement(m.b,{path:"/register"},r.a.createElement(N,null)),r.a.createElement(m.b,{path:"/login"},a?r.a.createElement(m.a,{to:"/manage"}):r.a.createElement(g,{setLoginToken:c})),r.a.createElement(m.b,{path:"/manage/:placeID?"},a?r.a.createElement(te,null):r.a.createElement(m.a,{to:"/login"})),r.a.createElement(m.b,{path:"/logout"},a?r.a.createElement(ae,{setLoginToken:c}):r.a.createElement(m.a,{to:"/"})),r.a.createElement(m.b,{path:"/place/:placeID"},r.a.createElement($,null)))))},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,87)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),c(e),l(e)}))},ce=(a(84),Object(o.c)(Object(o.b)({modal:A,order:D})));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:ce},r.a.createElement(ne,null))),document.getElementById("root")),re()}},[[85,1,2]]]);
//# sourceMappingURL=main.4ad0eab9.chunk.js.map